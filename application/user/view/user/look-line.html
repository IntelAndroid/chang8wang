{include file="index@public:header"}
<link rel="stylesheet" href="__PUBLIC__/vendor/select2/select2.css">
<link rel="stylesheet" href="__PUBLIC__/vendor/bootstrap-tokenfield/bootstrap-tokenfield.css">
<link rel="stylesheet" href="__PUBLIC__/vendor/bootstrap-tagsinput/bootstrap-tagsinput.css">
<link rel="stylesheet" href="__PUBLIC__/vendor/bootstrap-select/bootstrap-select.css">
<link rel="stylesheet" href="__PUBLIC__/vendor/icheck/icheck.css">
<link rel="stylesheet" href="__PUBLIC__/vendor/switchery/switchery.css">
<link rel="stylesheet" href="__PUBLIC__/vendor/bootstrap-slider/bootstrap-slider.css">
<link rel="stylesheet" href="__PUBLIC__/vendor/clockpicker/clockpicker.css">
<link rel="stylesheet" href="__PUBLIC__/vendor/bootstrap-colorpicker/colorpicker.css">
<link rel="stylesheet" href="__PUBLIC__/vendor/bootstrap-touchspin/bootstrap-touchspin.css">
<link rel="stylesheet" href="__PUBLIC__/vendor/card/card.css">
<link rel="stylesheet" href="__PUBLIC__/vendor/jquery-labelauty/jquery-labelauty.css">
<link rel="stylesheet" href="__PUBLIC__/vendor/bootstrap-datepicker/bootstrap-datepicker.css">
<link rel="stylesheet" href="__PUBLIC__/vendor/bootstrap-maxlength/bootstrap-maxlength.css">
<link rel="stylesheet" href="__PUBLIC__/vendor/bootstrap-daterangepicker/daterangepicker.css">
<link rel="stylesheet" href="__PUBLIC__/vendor/fontawesome-iconpicker/iconpicker.css">
<link rel="stylesheet" href="__PUBLIC__/vendor/jt-timepicker/jquery-timepicker.css">
<link rel="stylesheet" href="__PUBLIC__/vendor/jquery-strength/jquery-strength.css">
<link rel="stylesheet" href="__PUBLIC__/vendor/multi-select/multi-select.css">
<link rel="stylesheet" href="__PUBLIC__/vendor/typeahead-js/typeahead.css">
<script>
    Breakpoints();
</script>


<link rel="stylesheet" href="__PUBLIC__/themes/fileinput/css/fileinput.min.css">
<script src="__PUBLIC__/themes/fileinput/js/fileinput.min.js"></script>
<script src="__PUBLIC__/themes/fileinput/js/locales/zh.js"></script>
<script src="__PUBLIC__/js/base.js"></script>
<script src="__PUBLIC__/js/common.js"></script>
<script src="__PUBLIC__/js/sysDict.js"></script>
<link href="__PLUG__/bootstrap-table/bootstrap-table.min.css" rel="stylesheet">
<script src="__PLUG__/bootstrap-table/bootstrap-table.min.js"></script>


<!-- 插件 -->
<script src="__PUBLIC__/themes/classic/global/js/plugins/responsive-tabs.js"></script>
<script src="__PUBLIC__/vendor/ashoverscroll/jquery-asHoverScroll.min.js"></script>
<script src="__PUBLIC__/vendor/slimscroll/jquery.slimscroll.min.js"></script>
<script src="__PUBLIC__/vendor/screenfull/screenfull.min.js"></script>
<script src="__PUBLIC__/vendor/select2/select2.full.min.js"></script>
<script src="__PUBLIC__/vendor/bootstrap-tokenfield/bootstrap-tokenfield.min.js"></script>
<script src="__PUBLIC__/vendor/bootstrap-tagsinput/bootstrap-tagsinput.min.js"></script>
<script src="__PUBLIC__/vendor/bootstrap-select/bootstrap-select.min.js"></script>
<script src="__PUBLIC__/vendor/icheck/icheck.min.js"></script>
<script src="__PUBLIC__/vendor/switchery/switchery.min.js"></script>
<script src="__PUBLIC__/vendor/bootstrap-slider/bootstrap-slider.min.js"></script>
<script src="__PUBLIC__/vendor/clockpicker/bootstrap-clockpicker.min.js"></script>
<script src="__PUBLIC__/vendor/bootstrap-colorpicker/bootstrap-colorpicker.min.js"></script>
<script src="__PUBLIC__/vendor/bootstrap-maxlength/bootstrap-maxlength.min.js"></script>
<script src="__PUBLIC__/vendor/jquery-knob/jquery.knob.min.js"></script>
<script src="__PUBLIC__/vendor/bootstrap-touchspin/jquery.bootstrap-touchspin.min.js"></script>
<script src="__PUBLIC__/vendor/card/jquery.card.js"></script>
<script src="__PUBLIC__/vendor/jquery-labelauty/jquery-labelauty.min.js"></script>
<script src="__PUBLIC__/vendor/bootstrap-datepicker/bootstrap-datepicker.min.js"></script>
<script src="__PUBLIC__/vendor/bootstrap-datepicker/locales/bootstrap-datepicker.zh-CN.min.js"></script>
<script src="__PUBLIC__/vendor/jt-timepicker/jquery.timepicker.min.js"></script>
<script src="__PUBLIC__/vendor/bootstrap-daterangepicker/moment.min.js"></script>
<script src="__PUBLIC__/vendor/bootstrap-daterangepicker/daterangepicker.min.js"></script>
<script src="__PUBLIC__/vendor/datepair-js/jquery.datepair.min.js"></script>
<script src="__PUBLIC__/vendor/fontawesome-iconpicker/fontawesome-iconpicker.min.js"></script>
<script src="__PUBLIC__/vendor/jquery-strength/jquery-strength.min.js"></script>
<script src="__PUBLIC__/vendor/multi-select/jquery.multi-select.min.js"></script>
<script src="__PUBLIC__/vendor/typeahead-js/bloodhound.min.js"></script>
<script src="__PUBLIC__/vendor/typeahead-js/typeahead.jquery.min.js"></script>
<script src="__PUBLIC__/js/examples/forms/advanced.js"></script>
</head>

<body>
    <main class="site-page">
        <div class="page-container" id="admui-pageContent">
            <div class="page animation-fade page-account">
                <div class="page-header">
                    <h1 class="page-title">通知公告</h1>
                </div>
                <div class="page-content">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="panel">
                                <div class="panel-body nav-tabs-animate">
                                    <ul class="nav nav-tabs nav-tabs-line tabline" role="tablist">
                                        <li class="news accout-msg active" role="presentation" value='6019001'>
                                            <a href="#message" aria-controls="message" role="tab" data-toggle="tab">
                                                <i class="icon iconfont icon-remind"></i> 空间公告
                                                <span class="badge badge-danger"></span>
                                            </a>
                                        </li>
                                        <li role="presentation" class="account-log" value='6019004'>
                                            <a href="#log" aria-controls="log" role="tab" data-toggle="tab">
                                                <i class="icon iconfont icon-remind"></i> 系统公告
                                            </a>
                                        </li>
                                    </ul>
                                    <style>
                                        .media span.crt {
                                            display: -webkit-box;
                                            -webkit-box-orient: vertical;
                                            -webkit-line-clamp: 3;
                                            overflow: hidden;
                                            display: inline-block;
                                            width: 100%;
                                            height: 48px;
                                            color: #76838f;
                                            overflow: hidden;
                                            -webkit-line-clamp: 2;
                                            -webkit-box-orient: vertical;
                                            text-overflow: ellipsis;
                                            display: -webkit-box;
                                        }

                                        .media span.time {
                                            float: right;
                                            color: #999;
                                            font-size: 14px;
                                        }

                                        .media a {
                                            text-decoration: none;
                                        }
                                    </style>
                                    <div class="tab-content" id="tab-content">
                                        <div class="tab-pane animation-slide-left tab-message active" role="tabpanel" id="message">
                                            <div class="row row-lg">
                                                <div class="col-md-12">
                                                    <div class="example-wrap">
                                                        <div class="example space">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="tab-pane animation-slide-left tab-log" role="tabpanel" id="log">
                                            <div class="row row-lg">
                                                <div class="col-md-12">
                                                    <div class="example-wrap">
                                                        <div class="example">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="site-footer">
        <div class="site-footer-legal">创8网 &copy;
            <a href="http://qd.zlhuiyun.com/web/Index" target="_blank">qd.zlhuiyun.com</a>
        </div>
        <div class="site-footer-right">
            当前版本：v1.3.0
            <a class="margin-left-5" data-toggle="tooltip" title="升级" href="http://qd.zlhuiyun.com/web/Index" target="_blank">
                <i class="icon fa-cloud-upload"></i>
            </a>
        </div>
    </footer>

    <!-- 插件 -->
    <script src="__PUBLIC__/themes/classic/global/js/plugins/responsive-tabs.js"></script>
    <script src="__PUBLIC__/vendor/ashoverscroll/jquery-asHoverScroll.min.js"></script>
    <script src="__PUBLIC__/vendor/slimscroll/jquery.slimscroll.min.js"></script>
    <script src="__PUBLIC__/vendor/screenfull/screenfull.min.js"></script>
    <script src="__PUBLIC__/vendor/jquery-strength/jquery-strength.min.js"></script>
    <script src="__PUBLIC__/vendor/alertify-js/alertify.min.js"></script>
    <script src="__PUBLIC__/vendor/datatables/jquery.dataTables.min.js"></script>
    <script src="__PUBLIC__/vendor/datatables-bootstrap/dataTables.bootstrap.min.js"></script>
    <script src="__PUBLIC__/vendor/datatables-responsive/dataTables.responsive.min.js"></script>
    <script src="__PUBLIC__/vendor/formvalidation/formValidation.min.js"></script>
    <script src="__PUBLIC__/vendor/formvalidation/framework/bootstrap.min.js"></script>
    <script src="__PUBLIC__/vendor/switchery/switchery.min.js"></script>
    <script src="__PUBLIC__/vendor/bootstrap-select/bootstrap-select.min.js"></script>

    <script src="__PUBLIC__/js/system/log.js"></script>
    <script src="__PUBLIC__/js/system/account/account.js"></script>
    <script src="__PUBLIC__/js/system/account/message.js"></script>
    <script src="__PUBLIC__/js/system/account/password.js"></script>
    <!--选择时间插件-->
    <script src="__PUBLIC__/vendor/bootstrap-datepicker/bootstrap-datepicker.min.js"></script>
    <script src="__PUBLIC__/vendor/bootstrap-datepicker/locales/bootstrap-datepicker.zh-CN.min.js"></script>

    <!-- 消息通知 -->
    <script src="__PUBLIC__/js/notify-msg.js"></script>
    <script src='__PUBLIC__/themes/theme.js'></script>
    <script src="__PUBLIC__/vendor/formatter-js/jquery.formatter.min.js"></script>

</body>
<script>	
    let url = '{:url("/user/notice/getAllNotice")}'
    let data = {
            source: '6019001'
        }
    $('.tabline').on('click', 'li', function () {
        data = {
            source: $(this).attr('value')
        }
        sum();
    })
    function sum() {
        $('.example').html('')
        cstmpost('', url, data, function (res) {
            $.each(res.data, function (i) {
                let content = removeHTMLTag(res.data[i].content)
                let divbox = '<div class="media margin-bottom-10" value="' + res.data[i].noticeId + '" msgId="'+ res.data[i].msgId +'"><a href="publick-detail.html"><div class="media-body"><h4 class="media-heading">' + res.data[i].title +
                    '<span class="time">' + res.data[i].title + '</span> </h4><span class="crt">' + content + '</span></div></a></div>'
                $('.example').append(divbox)

                // 截取文本框中的文字
                function removeHTMLTag(str) {
                    str = str.replace(/<\/?[^>]*>/g, ''); //去除HTML tag
                    str = str.replace(/[ | ]*\n/g, '\n'); //去除行尾空白
                    //str = str.replace(/\n[\s| | ]*\r/g,'\n'); //去除多余空行
                    str = str.replace(/&nbsp;/ig, '');//去掉&nbsp;
                    str = str.replace(/\s/g, ''); //将空格去掉
                    return str;
                }
            })
        })
    }
    sum()
    $('#tab-content').on('click', 'a', function () {
        sessionStorage.setItem('noticeId', $(this).parent().attr('value'))
            // 已读session存储
        sessionStorage.setItem('msgId', $(this).parent().attr('msgId'))
    })

</script>

</html>